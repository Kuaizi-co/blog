(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{299:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[t._v("#")]),t._v(" npm")]),t._v(" "),a("ul",[a("li",[t._v("npm init")]),t._v(" "),a("li",[t._v("npm version")]),t._v(" "),a("li",[t._v("npm dist-tag")]),t._v(" "),a("li",[t._v("npm publish")]),t._v(" "),a("li",[t._v("npm unpublish")]),t._v(" "),a("li",[t._v("npm publish scoped packages")])]),t._v(" "),a("h3",{attrs:{id:"npm-init-初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-init-初始化"}},[t._v("#")]),t._v(" npm init 初始化")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> mkdir mypack && cd mypack\n> npm init -y\n")])])]),a("p",[t._v("初始化包模块，生成 "),a("code",[t._v("package.json")]),t._v(" 配置文件")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mypack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keywords"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"license"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ISC"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"package-json-字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json-字段"}},[t._v("#")]),t._v(" package.json 字段")]),t._v(" "),a("ul",[a("li",[t._v("name 模块名称")]),t._v(" "),a("li",[t._v("version 版本号")]),t._v(" "),a("li",[t._v("description 模块描述")]),t._v(" "),a("li",[t._v("main 模块入口，可以被其他模块所引用，比如 "),a("code",[t._v("var mypack = require('mypack'')")])]),t._v(" "),a("li",[t._v("keyswords 模块搜素关键字")]),t._v(" "),a("li",[t._v("author 作者")]),t._v(" "),a("li",[t._v("license 版权协议")]),t._v(" "),a("li",[t._v("bugs bug提交地址")]),t._v(" "),a("li",[t._v("homepage 模块主页")]),t._v(" "),a("li",[t._v("repository 仓库地址")]),t._v(" "),a("li",[t._v("scripts 模块脚本命令")]),t._v(" "),a("li",[t._v("files 模块指定包含文件")]),t._v(" "),a("li",[t._v("devDependencies 开发环境依赖模块")]),t._v(" "),a("li",[t._v("dependencies 模块依赖模块，在模块安装时同时安装")]),t._v(" "),a("li",[t._v("peerDependencies 模块安装时同时安装，但版本以外部版本为主")])]),t._v(" "),a("h3",{attrs:{id:"npm-version"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-version"}},[t._v("#")]),t._v(" npm version")]),t._v(" "),a("p",[t._v("遵循 "),a("code",[t._v("语义化版本")]),t._v(" "),a("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[t._v("semver version"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("主版本号：当你做了不兼容的 API 修改，")]),t._v(" "),a("li",[t._v("次版本号：当你做了向下兼容的功能性新增，")]),t._v(" "),a("li",[t._v("修订号：当你做了向下兼容的问题修正。")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('> npm version [new version | major | minor | patch | premajor | preminor | prepatch ] -m "message"\n')])])]),a("p",[t._v("使用命令修改版本，好处是自动生成一个Git tag ["),a("code",[t._v("git-tag-version")]),t._v("] 提交")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm version 1.1.0\n> v1.1.0\nnpm version prepatch\n> v1.1.1-0\nnpm version prepatch\nv1.1.2-0\nnpm version patch\n> v1.1.2\nnpm version preminor\n> v1.2.0-0\nnpm version minor\n> v1.2.0\nnpm version premajor\n> v2.0.0-0\nnpm version major\n> v2.0.0\n")])])]),a("h4",{attrs:{id:"版本管理工具-release-it"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本管理工具-release-it"}},[t._v("#")]),t._v(" 版本管理工具 release-it")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/Kuaizi-co/vue-cli-plugin-auto-router/blob/dev/package.json#L13",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("λ npm run release\n\n> mypack@2.0.0 release D:\\project\\test\\mypack\n> release-it\n\nWARNING Latest version in registry (1.0.0) does not match package.json (2.0.0).\n\n🚀 Let's release mypack (currently at 2.0.0)\n\n\nEmpty changelog\n\n? Select increment (next version): (Use arrow keys)\n> patch (2.0.1)\n  minor (2.1.0)\n  major (3.0.0)\n  prepatch (2.0.1-0)\n  preminor (2.1.0-0)\n  premajor (3.0.0-0)\n  Other, please specify...\n")])])]),a("h3",{attrs:{id:"npm-dist-tag-发布版本标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-dist-tag-发布版本标签"}},[t._v("#")]),t._v(" npm dist-tag 发布版本标签")]),t._v(" "),a("p",[t._v("添加，删除或查看模块某版本")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm dist-tag add <pkg>@<version> [<tag>]\nnpm dist-tag rm <pkg> <tag>\nnpm dist-tag ls [<pkg>]\n")])])]),a("p",[t._v("比如，查看"),a("code",[t._v("@kuaizi/kz-ui")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm dist-tag ls @kuaizi/kz-ui\nalpha: 2.0.0-alpha\nbeta: 2.9.0-beta\nlatest: 2.9.2\nnext: 2.0.0-alpha.26\n")])])]),a("p",[t._v("安装某个标签的最新版本")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yarn add @kuaizi/kz-ui@beta\n")])])]),a("p",[t._v("安装成功后，我们可以查看 "),a("code",[t._v("package.json")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n "dependencies": {\n    "@kuaizi/kz-ui": "^2.9.0-beta"\n  }\n}\n')])])]),a("h3",{attrs:{id:"npm-publish-发布模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-publish-发布模块"}},[t._v("#")]),t._v(" npm publish 发布模块")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm publish <folder> --tag <tag>\n")])])]),a("p",[t._v("尝试发布当前包")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('λ npm publish --tag alpha\nnpm notice\nnpm notice package: mypack@2.0.0\nnpm notice === Tarball Contents ===\nnpm notice 485B    package.json\nnpm notice 122.6kB yarn.lock\nnpm notice === Tarball Details ===\nnpm notice name:          mypack\nnpm notice version:       2.0.0\nnpm notice package size:  40.9 kB\nnpm notice unpacked size: 123.1 kB\nnpm notice shasum:        94f14bf06a06e92bdb0c3ab4f4a57f5933ab0cbd\nnpm notice integrity:     sha512-9wje0sV67oxW7[...]Nf5kVxm77gjSQ==\nnpm notice total files:   2\nnpm notice\nnpm ERR! code E403\nnpm ERR! 403 Forbidden - PUT https://registry.npmjs.org/mypack - You do not have permission to publish "mypack". Are you logged in as the correct user?\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\wuhaiyang\\AppData\\Roaming\\npm-cache\\_logs\\2019-05-13T06_21_55_910Z-debug.log\n')])])]),a("p",[t._v("提示没有权限操作"),a("code",[t._v("mypack")]),t._v("模块，我们查看一下 "),a("code",[t._v("package.json")]),t._v("，修改 "),a("code",[t._v("name")]),t._v(" 为 "),a("code",[t._v("mypack-test-by-tomieric")]),t._v("再次发布。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("λ npm publish --tag alpha\nnpm notice\nnpm notice package: mypack-test-by-tomieric@2.0.0\nnpm notice === Tarball Contents ===\nnpm notice 531B    package.json\nnpm notice 122.6kB yarn.lock\nnpm notice === Tarball Details ===\nnpm notice name:          mypack-test-by-tomieric\nnpm notice version:       2.0.0\nnpm notice package size:  40.9 kB\nnpm notice unpacked size: 123.2 kB\nnpm notice shasum:        419b2fd5254c45931dd34f7cfa581327e3b475d4\nnpm notice integrity:     sha512-wmvrAndGVIcBc[...]4aMKGmJ51rURg==\nnpm notice total files:   2\nnpm notice\n+ mypack-test-by-tomieric@2.0.0\n")])])]),a("p",[t._v("打开"),a("a",{attrs:{href:"//npmjs.com"}},[t._v("//npmjs.com")]),t._v(",进入自己的包列表, "),a("a",{attrs:{href:"https://www.npmjs.com/package/mypack-test-by-tomieric",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.npmjs.com/package/mypack-test-by-tomieric"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"npm-unpublish-撤销已发布模块或版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-unpublish-撤销已发布模块或版本"}},[t._v("#")]),t._v(" npm unpublish 撤销已发布模块或版本")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm version patch\nv2.0.1\n\n npm publish\nnpm notice\nnpm notice package: mypack-test-by-tomieric@2.0.1\nnpm notice === Tarball Contents ===\nnpm notice 531B    package.json\nnpm notice 122.6kB yarn.lock\nnpm notice === Tarball Details ===\nnpm notice name:          mypack-test-by-tomieric\nnpm notice version:       2.0.1\nnpm notice package size:  40.9 kB\nnpm notice unpacked size: 123.2 kB\nnpm notice shasum:        8024ad91f77ab50477db603c33de9c58c8eff542\nnpm notice integrity:     sha512-mc8HPQGiCQtc6[...]wfaUvNcs+6Jxw==\nnpm notice total files:   2\nnpm notice\n+ mypack-test-by-tomieric@2.0.1\n\nnpm unpublish mypack-test-by-tomieric@2.0.1\n-mypack-test-by-tomieric@2.0.1\n")])])]),a("h2",{attrs:{id:"npm-publish-scoped-packages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-publish-scoped-packages"}},[t._v("#")]),t._v(" npm publish scoped packages")]),t._v(" "),a("p",[t._v("在上面发布的测试模块，我们觉得模块叫 "),a("code",[t._v("mypack")]),t._v(" 能更好区分和记住，那应该如何去做？")]),t._v(" "),a("p",[t._v("npm 模块是支持增加类似命名空间的 "),a("code",[t._v("scoped")]),t._v("域，通过在模块名称前面加上 "),a("code",[t._v("@scoped/")]),t._v("，比如 "),a("code",[t._v("@vue/cli")]),t._v(", "),a("code",[t._v("@babel/core-js")]),t._v("等")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("# "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@tomieric/mypack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release-it"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keywords"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tomieric <tomieric@gmail.com>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"license"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ISC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"devDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@release-it/conventional-changelog"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conventional-changelog-cli"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.0.21"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release-it"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^12.0.1"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@kuaizi/kz-ui"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.9.0-beta"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("定义了域的模块具有一定的权限限定，需要通过声明为公开模块")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm publish --access=publish\n")])])]),a("p",[t._v("或者修改 "),a("code",[t._v("package.json")]),t._v(", 增加 "),a("code",[t._v("publishConfig")]),t._v(" 字段")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@tomieric/mypack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release-it"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keywords"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tomieric <tomieric@gmail.com>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"license"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ISC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"devDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@release-it/conventional-changelog"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conventional-changelog-cli"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.0.21"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release-it"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^12.0.1"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@kuaizi/kz-ui"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.9.0-beta"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"publishConfig"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"access"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"public"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/@tomieric/mypack",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.npmjs.com/package/@tomieric/mypack"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"yarn-link-vs-npm-link-调试包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn-link-vs-npm-link-调试包"}},[t._v("#")]),t._v(" "),a("code",[t._v("yarn link")]),t._v(" vs "),a("code",[t._v("npm link")]),t._v(" 调试包")]),t._v(" "),a("p",[t._v("推荐 "),a("code",[t._v("yarn link")]),t._v(", 速度更快，但需要注意使用 "),a("code",[t._v("yarn unlink mypack")]),t._v(" 删掉软链")]),t._v(" "),a("h2",{attrs:{id:"lerna-多模块管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna-多模块管理"}},[t._v("#")]),t._v(" lerna 多模块管理")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/35237759",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用lerna优雅地管理多个package"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("多模块开发，且多模块之间相互依赖时，如何优雅管理模块的发版。"),a("code",[t._v("lerna")]),t._v(" 是实现 "),a("code",[t._v("monorepo")]),t._v(" 工作流的一个工具。")]),t._v(" "),a("h3",{attrs:{id:"初始化demo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化demo"}},[t._v("#")]),t._v(" 初始化demo")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("mkdir lerna && cd lerna && npx lerna init\nmkdir packages && cd packages\nmkdir animal && cd animal && npm init -y\ncd ..\nmkdir dog && cd dog && npm init -y\ncd ../..\n")])])]),a("h3",{attrs:{id:"add-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-module"}},[t._v("#")]),t._v(" add module")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npx lerna add assert --scope=animal\nnpx lerna add animal --scope=dog\n")])])]),a("h3",{attrs:{id:"lerna-version"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna-version"}},[t._v("#")]),t._v(" lerna version")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("lerna version 1.1.0\n")])])]),a("h3",{attrs:{id:"lerna-publish"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna-publish"}},[t._v("#")]),t._v(" lerna publish")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("lerna publish\n")])])]),a("p",[t._v("案例：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/Kuaizi-co/cep",target:"_blank",rel:"noopener noreferrer"}},[t._v("cep"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/Kuaizi-co/i18n",target:"_blank",rel:"noopener noreferrer"}},[t._v("@kuaizi/i18n"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);