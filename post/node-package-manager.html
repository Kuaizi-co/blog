<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端模块包管理 | 前端周刊</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="前端模块包管理">
    <meta name="keywords" content="前端,npm,lerna">
    
    <link rel="preload" href="/blog/assets/css/0.styles.bc4e2984.css" as="style"><link rel="preload" href="/blog/assets/js/app.d3fa5209.js" as="script"><link rel="preload" href="/blog/assets/js/6.d4095322.js" as="script"><link rel="preload" href="/blog/assets/js/4.64cbf7a8.js" as="script"><link rel="preload" href="/blog/assets/js/28.a5fc788a.js" as="script"><link rel="preload" href="/blog/assets/js/10.ce23e8e8.js" as="script"><link rel="preload" href="/blog/assets/js/11.7cde289b.js" as="script"><link rel="preload" href="/blog/assets/js/30.967a757e.js" as="script"><link rel="preload" href="/blog/assets/js/25.3294d02e.js" as="script"><link rel="preload" href="/blog/assets/js/13.4b26077c.js" as="script"><link rel="preload" href="/blog/assets/js/21.65ff6ff5.js" as="script"><link rel="preload" href="/blog/assets/js/31.6775aed3.js" as="script"><link rel="preload" href="/blog/assets/js/23.c6a37407.js" as="script"><link rel="preload" href="/blog/assets/js/15.b4502122.js" as="script"><link rel="preload" href="/blog/assets/js/5.865b38fd.js" as="script"><link rel="preload" href="/blog/assets/js/48.58fd26b9.js" as="script"><link rel="preload" href="/blog/assets/js/24.193852d3.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.d622105c.js"><link rel="prefetch" href="/blog/assets/js/12.6ca6e9f4.js"><link rel="prefetch" href="/blog/assets/js/14.10c8486f.js"><link rel="prefetch" href="/blog/assets/js/16.3866ee9b.js"><link rel="prefetch" href="/blog/assets/js/17.bbe78093.js"><link rel="prefetch" href="/blog/assets/js/18.9907e1f2.js"><link rel="prefetch" href="/blog/assets/js/19.783d5ba6.js"><link rel="prefetch" href="/blog/assets/js/20.3c937b8a.js"><link rel="prefetch" href="/blog/assets/js/22.50ce623e.js"><link rel="prefetch" href="/blog/assets/js/26.eddcc531.js"><link rel="prefetch" href="/blog/assets/js/27.3b8e77fb.js"><link rel="prefetch" href="/blog/assets/js/29.da8cd36f.js"><link rel="prefetch" href="/blog/assets/js/32.9bb40d9c.js"><link rel="prefetch" href="/blog/assets/js/33.1036ba5f.js"><link rel="prefetch" href="/blog/assets/js/34.5612442f.js"><link rel="prefetch" href="/blog/assets/js/35.cc055681.js"><link rel="prefetch" href="/blog/assets/js/36.cabad0ff.js"><link rel="prefetch" href="/blog/assets/js/37.c4424565.js"><link rel="prefetch" href="/blog/assets/js/38.c8fa029c.js"><link rel="prefetch" href="/blog/assets/js/39.19fc3d4a.js"><link rel="prefetch" href="/blog/assets/js/40.f021c568.js"><link rel="prefetch" href="/blog/assets/js/41.793f7f4e.js"><link rel="prefetch" href="/blog/assets/js/42.6f27a5bc.js"><link rel="prefetch" href="/blog/assets/js/43.e8c112b8.js"><link rel="prefetch" href="/blog/assets/js/44.bd1a3840.js"><link rel="prefetch" href="/blog/assets/js/45.a764f837.js"><link rel="prefetch" href="/blog/assets/js/46.9fbc0d8e.js"><link rel="prefetch" href="/blog/assets/js/47.96a9c9e7.js"><link rel="prefetch" href="/blog/assets/js/49.53cd3ec8.js"><link rel="prefetch" href="/blog/assets/js/50.240d63b7.js"><link rel="prefetch" href="/blog/assets/js/51.e5b84ed7.js"><link rel="prefetch" href="/blog/assets/js/52.055263b3.js"><link rel="prefetch" href="/blog/assets/js/53.03cc0e10.js"><link rel="prefetch" href="/blog/assets/js/54.bf34bb71.js"><link rel="prefetch" href="/blog/assets/js/55.ef80fe04.js"><link rel="prefetch" href="/blog/assets/js/56.b8269e5b.js"><link rel="prefetch" href="/blog/assets/js/57.903564fd.js"><link rel="prefetch" href="/blog/assets/js/7.57b0655a.js"><link rel="prefetch" href="/blog/assets/js/8.90da5599.js"><link rel="prefetch" href="/blog/assets/js/9.b5a43ae9.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.21b2360e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.bc4e2984.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="track-theme"><header class="theme-track--header"><div class="theme-track--navbar"><div class="theme-track--brand"><a href="/blog/" class="theme-track--logo router-link-active"><img src="/blog/images/logo.png"></a></div> <nav class="theme-track--nav-links"><ul><li><a href="/blog/" class="router-link-active">首页</a></li><li><a href="/blog/post/" class="router-link-active active">博客</a></li><li><a href="/blog/weekly/">周刊</a></li><li><a href="/blog/tag/">标签</a></li><li><a href="/blog/about.html">关于我们</a></li><li><a href="/blog/track.html">Track</a></li></ul> <div class="nav-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="theme-track--nav-mask" style="display:none;"></div></nav> <div class="theme-track--header-github"><a href="//github.com/kuaizi-co" target="_blank"><i class="iconfont icon-github"></i></a></div> <div class="theme-track--header-search"><div class="search-box"><i class="iconfont icon-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value="" class="search-text"></div> <ul class="search-suggestion" style="display:none;"></ul> <button class="search-btn"><i class="iconfont icon-search"></i></button></div></div></header> <div class="track-them--container"><div class="theme-track--content-wrapper"><img src="/blog/images/v2-a249c1ec19957248e6187692d0db7047_r.jpg" class="theme-track--content-poster"> <div class="theme-track--content"><div class="sidebar-wrapper"><div><div class="sidebar"> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>前端模块包管理</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/post/node-package-manager.html#npm" class="sidebar-link">npm</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#npm-init-初始化" class="sidebar-link">npm init 初始化</a></li><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#npm-version" class="sidebar-link">npm version</a></li><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#npm-dist-tag-发布版本标签" class="sidebar-link">npm dist-tag 发布版本标签</a></li><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#npm-publish-发布模块" class="sidebar-link">npm publish 发布模块</a></li></ul></li><li><a href="/blog/post/node-package-manager.html#npm-unpublish-撤销已发布模块或版本" class="sidebar-link">npm unpublish 撤销已发布模块或版本</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/post/node-package-manager.html#npm-publish-scoped-packages" class="sidebar-link">npm publish scoped packages</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#yarn-link-vs-npm-link-调试包" class="sidebar-link">yarn link vs npm link 调试包</a></li></ul></li><li><a href="/blog/post/node-package-manager.html#lerna-多模块管理" class="sidebar-link">lerna 多模块管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#初始化demo" class="sidebar-link">初始化demo</a></li><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#add-module" class="sidebar-link">add module</a></li><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#lerna-version" class="sidebar-link">lerna version</a></li><li class="sidebar-sub-header"><a href="/blog/post/node-package-manager.html#lerna-publish" class="sidebar-link">lerna publish</a></li></ul></li></ul></div></li></ul> </div></div></div> <div class="theme-track--content-main"><p class="theme-track--content-date"><span>Publish: 2019-05-13 14:00:00</span> <span>
            Tags:
            <a href="/blog/tags/前端" class="tag">
              前端
            </a></span></p> <div class="theme-track--content-meta"><h1>前端模块包管理</h1> <div class="theme-track--github-card"><span><img src="https://github.com/tomieric.png?size=100"></span> <p class="theme-track--content-meta-author"><i class="iconfont icon-home"></i> tomieric</p> <!----></div> <!----></div> <div class="content__default"><h2 id="npm"><a href="#npm" class="header-anchor">#</a> npm</h2> <ul><li>npm init</li> <li>npm version</li> <li>npm dist-tag</li> <li>npm publish</li> <li>npm unpublish</li> <li>npm publish scoped packages</li></ul> <h3 id="npm-init-初始化"><a href="#npm-init-初始化" class="header-anchor">#</a> npm init 初始化</h3> <div class="language- extra-class"><pre class="language-text"><code>&gt; mkdir mypack &amp;&amp; cd mypack
&gt; npm init -y
</code></pre></div><p>初始化包模块，生成 <code>package.json</code> 配置文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mypack&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="package-json-字段"><a href="#package-json-字段" class="header-anchor">#</a> package.json 字段</h4> <ul><li>name 模块名称</li> <li>version 版本号</li> <li>description 模块描述</li> <li>main 模块入口，可以被其他模块所引用，比如 <code>var mypack = require('mypack'')</code></li> <li>keyswords 模块搜素关键字</li> <li>author 作者</li> <li>license 版权协议</li> <li>bugs bug提交地址</li> <li>homepage 模块主页</li> <li>repository 仓库地址</li> <li>scripts 模块脚本命令</li> <li>files 模块指定包含文件</li> <li>devDependencies 开发环境依赖模块</li> <li>dependencies 模块依赖模块，在模块安装时同时安装</li> <li>peerDependencies 模块安装时同时安装，但版本以外部版本为主</li></ul> <h3 id="npm-version"><a href="#npm-version" class="header-anchor">#</a> npm version</h3> <p>遵循 <code>语义化版本</code> <a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener noreferrer">semver version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>主版本号：当你做了不兼容的 API 修改，</li> <li>次版本号：当你做了向下兼容的功能性新增，</li> <li>修订号：当你做了向下兼容的问题修正。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&gt; npm version [new version | major | minor | patch | premajor | preminor | prepatch ] -m &quot;message&quot;
</code></pre></div><p>使用命令修改版本，好处是自动生成一个Git tag [<code>git-tag-version</code>] 提交</p> <div class="language- extra-class"><pre class="language-text"><code>npm version 1.1.0
&gt; v1.1.0
npm version prepatch
&gt; v1.1.1-0
npm version prepatch
v1.1.2-0
npm version patch
&gt; v1.1.2
npm version preminor
&gt; v1.2.0-0
npm version minor
&gt; v1.2.0
npm version premajor
&gt; v2.0.0-0
npm version major
&gt; v2.0.0
</code></pre></div><h4 id="版本管理工具-release-it"><a href="#版本管理工具-release-it" class="header-anchor">#</a> 版本管理工具 release-it</h4> <p><a href="https://github.com/Kuaizi-co/vue-cli-plugin-auto-router/blob/dev/package.json#L13" target="_blank" rel="noopener noreferrer">demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>λ npm run release

&gt; mypack@2.0.0 release D:\project\test\mypack
&gt; release-it

WARNING Latest version in registry (1.0.0) does not match package.json (2.0.0).

🚀 Let's release mypack (currently at 2.0.0)


Empty changelog

? Select increment (next version): (Use arrow keys)
&gt; patch (2.0.1)
  minor (2.1.0)
  major (3.0.0)
  prepatch (2.0.1-0)
  preminor (2.1.0-0)
  premajor (3.0.0-0)
  Other, please specify...
</code></pre></div><h3 id="npm-dist-tag-发布版本标签"><a href="#npm-dist-tag-发布版本标签" class="header-anchor">#</a> npm dist-tag 发布版本标签</h3> <p>添加，删除或查看模块某版本</p> <div class="language- extra-class"><pre class="language-text"><code>npm dist-tag add &lt;pkg&gt;@&lt;version&gt; [&lt;tag&gt;]
npm dist-tag rm &lt;pkg&gt; &lt;tag&gt;
npm dist-tag ls [&lt;pkg&gt;]
</code></pre></div><p>比如，查看<code>@kuaizi/kz-ui</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm dist-tag ls @kuaizi/kz-ui
alpha: 2.0.0-alpha
beta: 2.9.0-beta
latest: 2.9.2
next: 2.0.0-alpha.26
</code></pre></div><p>安装某个标签的最新版本</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add @kuaizi/kz-ui@beta
</code></pre></div><p>安装成功后，我们可以查看 <code>package.json</code></p> <div class="language- extra-class"><pre class="language-text"><code>{
 &quot;dependencies&quot;: {
    &quot;@kuaizi/kz-ui&quot;: &quot;^2.9.0-beta&quot;
  }
}
</code></pre></div><h3 id="npm-publish-发布模块"><a href="#npm-publish-发布模块" class="header-anchor">#</a> npm publish 发布模块</h3> <div class="language- extra-class"><pre class="language-text"><code>npm publish &lt;folder&gt; --tag &lt;tag&gt;
</code></pre></div><p>尝试发布当前包</p> <div class="language- extra-class"><pre class="language-text"><code>λ npm publish --tag alpha
npm notice
npm notice package: mypack@2.0.0
npm notice === Tarball Contents ===
npm notice 485B    package.json
npm notice 122.6kB yarn.lock
npm notice === Tarball Details ===
npm notice name:          mypack
npm notice version:       2.0.0
npm notice package size:  40.9 kB
npm notice unpacked size: 123.1 kB
npm notice shasum:        94f14bf06a06e92bdb0c3ab4f4a57f5933ab0cbd
npm notice integrity:     sha512-9wje0sV67oxW7[...]Nf5kVxm77gjSQ==
npm notice total files:   2
npm notice
npm ERR! code E403
npm ERR! 403 Forbidden - PUT https://registry.npmjs.org/mypack - You do not have permission to publish &quot;mypack&quot;. Are you logged in as the correct user?

npm ERR! A complete log of this run can be found in:
npm ERR!     C:\Users\wuhaiyang\AppData\Roaming\npm-cache\_logs\2019-05-13T06_21_55_910Z-debug.log
</code></pre></div><p>提示没有权限操作<code>mypack</code>模块，我们查看一下 <code>package.json</code>，修改 <code>name</code> 为 <code>mypack-test-by-tomieric</code>再次发布。</p> <div class="language- extra-class"><pre class="language-text"><code>λ npm publish --tag alpha
npm notice
npm notice package: mypack-test-by-tomieric@2.0.0
npm notice === Tarball Contents ===
npm notice 531B    package.json
npm notice 122.6kB yarn.lock
npm notice === Tarball Details ===
npm notice name:          mypack-test-by-tomieric
npm notice version:       2.0.0
npm notice package size:  40.9 kB
npm notice unpacked size: 123.2 kB
npm notice shasum:        419b2fd5254c45931dd34f7cfa581327e3b475d4
npm notice integrity:     sha512-wmvrAndGVIcBc[...]4aMKGmJ51rURg==
npm notice total files:   2
npm notice
+ mypack-test-by-tomieric@2.0.0
</code></pre></div><p>打开<a href="//npmjs.com">//npmjs.com</a>,进入自己的包列表, <a href="https://www.npmjs.com/package/mypack-test-by-tomieric" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/mypack-test-by-tomieric<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="npm-unpublish-撤销已发布模块或版本"><a href="#npm-unpublish-撤销已发布模块或版本" class="header-anchor">#</a> npm unpublish 撤销已发布模块或版本</h2> <div class="language- extra-class"><pre class="language-text"><code>npm version patch
v2.0.1

 npm publish
npm notice
npm notice package: mypack-test-by-tomieric@2.0.1
npm notice === Tarball Contents ===
npm notice 531B    package.json
npm notice 122.6kB yarn.lock
npm notice === Tarball Details ===
npm notice name:          mypack-test-by-tomieric
npm notice version:       2.0.1
npm notice package size:  40.9 kB
npm notice unpacked size: 123.2 kB
npm notice shasum:        8024ad91f77ab50477db603c33de9c58c8eff542
npm notice integrity:     sha512-mc8HPQGiCQtc6[...]wfaUvNcs+6Jxw==
npm notice total files:   2
npm notice
+ mypack-test-by-tomieric@2.0.1

npm unpublish mypack-test-by-tomieric@2.0.1
-mypack-test-by-tomieric@2.0.1
</code></pre></div><h2 id="npm-publish-scoped-packages"><a href="#npm-publish-scoped-packages" class="header-anchor">#</a> npm publish scoped packages</h2> <p>在上面发布的测试模块，我们觉得模块叫 <code>mypack</code> 能更好区分和记住，那应该如何去做？</p> <p>npm 模块是支持增加类似命名空间的 <code>scoped</code>域，通过在模块名称前面加上 <code>@scoped/</code>，比如 <code>@vue/cli</code>, <code>@babel/core-js</code>等</p> <div class="language-js extra-class"><pre class="language-js"><code># <span class="token keyword">package</span><span class="token punctuation">.</span>json

<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@tomieric/mypack&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;release-it&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tomieric &lt;tomieric@gmail.com&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;@release-it/conventional-changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;conventional-changelog-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.21&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;release-it&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^12.0.1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;@kuaizi/kz-ui&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.9.0-beta&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>定义了域的模块具有一定的权限限定，需要通过声明为公开模块</p> <div class="language- extra-class"><pre class="language-text"><code>npm publish --access=publish
</code></pre></div><p>或者修改 <code>package.json</code>, 增加 <code>publishConfig</code> 字段</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@tomieric/mypack&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;release-it&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tomieric &lt;tomieric@gmail.com&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;@release-it/conventional-changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;conventional-changelog-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.21&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;release-it&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^12.0.1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;@kuaizi/kz-ui&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.9.0-beta&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;publishConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;access&quot;</span><span class="token operator">:</span> <span class="token string">&quot;public&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://www.npmjs.com/package/@tomieric/mypack" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/@tomieric/mypack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="yarn-link-vs-npm-link-调试包"><a href="#yarn-link-vs-npm-link-调试包" class="header-anchor">#</a> <code>yarn link</code> vs <code>npm link</code> 调试包</h3> <p>推荐 <code>yarn link</code>, 速度更快，但需要注意使用 <code>yarn unlink mypack</code> 删掉软链</p> <h2 id="lerna-多模块管理"><a href="#lerna-多模块管理" class="header-anchor">#</a> lerna 多模块管理</h2> <ul><li><a href="https://zhuanlan.zhihu.com/p/35237759" target="_blank" rel="noopener noreferrer">使用lerna优雅地管理多个package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>多模块开发，且多模块之间相互依赖时，如何优雅管理模块的发版。<code>lerna</code> 是实现 <code>monorepo</code> 工作流的一个工具。</p> <h3 id="初始化demo"><a href="#初始化demo" class="header-anchor">#</a> 初始化demo</h3> <div class="language- extra-class"><pre class="language-text"><code>mkdir lerna &amp;&amp; cd lerna &amp;&amp; npx lerna init
mkdir packages &amp;&amp; cd packages
mkdir animal &amp;&amp; cd animal &amp;&amp; npm init -y
cd ..
mkdir dog &amp;&amp; cd dog &amp;&amp; npm init -y
cd ../..
</code></pre></div><h3 id="add-module"><a href="#add-module" class="header-anchor">#</a> add module</h3> <div class="language- extra-class"><pre class="language-text"><code>npx lerna add assert --scope=animal
npx lerna add animal --scope=dog
</code></pre></div><h3 id="lerna-version"><a href="#lerna-version" class="header-anchor">#</a> lerna version</h3> <div class="language- extra-class"><pre class="language-text"><code>lerna version 1.1.0
</code></pre></div><h3 id="lerna-publish"><a href="#lerna-publish" class="header-anchor">#</a> lerna publish</h3> <div class="language- extra-class"><pre class="language-text"><code>lerna publish
</code></pre></div><p>案例：</p> <ul><li><a href="https://github.com/Kuaizi-co/cep" target="_blank" rel="noopener noreferrer">cep<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/Kuaizi-co/i18n" target="_blank" rel="noopener noreferrer">@kuaizi/i18n<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <p class="theme-track--content-page"><a href="/blog/post/adobe-cep-get-started.html" class="prev"><i class="iconfont icon-prev"></i>
            Adobe-CEP 插件开发
          </a> <a href="/blog/post/developer-roadmap.html" class="next">
            前端的开发之路指南 developer-roadmap
            <i class="iconfont icon-next"></i></a></p> <div id="comment-container"></div></div></div></div></div> <div class="theme-track--footer"><p>MIT Licensed | Copyright © 2018-present <a href="//www.kuaizi.ai" target="_blank">www.kuaizi.ai</a>, <a href="https://kuaizi-co.github.io/blog/rss.xml" target="_blank">订阅周刊</a></p> <p>
  Powered by vuepress theme <a href="//github.com/tomieric/vuepress-theme-track" target="_blank">Track</a>.
  Inspired by <a href="//github.com/Yubisaki/vuepress-theme-yubisaki" target="_blank">yubisaki</a></p></div></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.d3fa5209.js" defer></script><script src="/blog/assets/js/6.d4095322.js" defer></script><script src="/blog/assets/js/4.64cbf7a8.js" defer></script><script src="/blog/assets/js/28.a5fc788a.js" defer></script><script src="/blog/assets/js/10.ce23e8e8.js" defer></script><script src="/blog/assets/js/11.7cde289b.js" defer></script><script src="/blog/assets/js/30.967a757e.js" defer></script><script src="/blog/assets/js/25.3294d02e.js" defer></script><script src="/blog/assets/js/13.4b26077c.js" defer></script><script src="/blog/assets/js/21.65ff6ff5.js" defer></script><script src="/blog/assets/js/31.6775aed3.js" defer></script><script src="/blog/assets/js/23.c6a37407.js" defer></script><script src="/blog/assets/js/15.b4502122.js" defer></script><script src="/blog/assets/js/5.865b38fd.js" defer></script><script src="/blog/assets/js/48.58fd26b9.js" defer></script><script src="/blog/assets/js/24.193852d3.js" defer></script>
  </body>
</html>
